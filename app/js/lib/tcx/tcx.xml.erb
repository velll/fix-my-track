<?xml version="1.0" encoding="UTF-8"?>
<TrainingCenterDatabase xmlns="http://www.garmin.com/xmlschemas/TrainingCenterDatabase/v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.garmin.com/xmlschemas/TrainingCenterDatabase/v2 http://www.garmin.com/xmlschemas/TrainingCenterDatabasev2.xsd">
  <Activities>
    <Activity Sport="<%- activity.sport %>">
      <% activity.laps.forEach( lap => { %>
        <Lap StartTime="<%- lap.trackpoints[0].time %>">
          <TotalTimeSeconds><%- lap.totals.time %></TotalTimeSeconds>
          <DistanceMeters><%- lap.totals.distance %></DistanceMeters>
          <MaximumSpeed><%- lap.totals.maxSpeed %></MaximumSpeed>
          <% if (lap.totals.calories) { %>
          <Calories><%- lap.totals.calories %></Calories>
          <% }; %>
          <Track>
            <% lap.trackpoints.forEach( trackpoint => { %>
              <Trackpoint>
                <Time><%- trackpoint.time %></Time>
                <Position>
                  <LatitudeDegrees><%- trackpoint.lat %></LatitudeDegrees>
                  <LatitudeDegrees><%- trackpoint.long %></LatitudeDegrees>
                </Position>
                <% if (trackpoint.altitude) { %>
                <AltitudeMeters><%- trackpoint.altitude %></AltitudeMeters>
                <% }; %>
                <DistanceMeters>Total distance up to this point</DistanceMeters>
              <Trackpoint>
            <% }); %>
          </Track>
        </Lap>
      <% }); %>
    </Activity>
  </Activities>
</TrainingCenterDatabase>
